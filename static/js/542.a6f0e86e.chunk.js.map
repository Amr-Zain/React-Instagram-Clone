{"version":3,"file":"static/js/542.a6f0e86e.chunk.js","mappings":"0QA+GA,UAvGA,WAEI,IAAMA,GAAWC,EAAAA,EAAAA,MACjB,EAA4BC,EAAAA,WAAiBC,EAAAA,GAArCC,EAAR,EAAQA,KAAKC,EAAb,EAAaA,WAEb,EAA+BH,EAAAA,SAAe,CAACI,MAAM,GAAGC,SAAS,GAAGC,SAAS,GAAGC,SAAS,GAAGC,MAAM,KAAlG,eAAOC,EAAP,KAAiBC,EAAjB,KAEMC,EAA+B,KAAnBF,EAASL,OAAsC,KAAtBK,EAASJ,UAAiBI,EAASJ,SAASO,OAAO,GACxE,KAApBH,EAASH,UAAmC,KAApBG,EAASF,SACnC,SAASM,EAAaC,GAClBJ,GAAY,SAACK,GAAO,yBACbA,GADa,cAEfD,EAAIE,OAAOC,KAAOH,EAAIE,OAAOE,WAZzB,8CAcb,WAA6BC,GAA7B,qFACIA,EAAMC,iBADV,UAE0BC,EAAAA,EAAAA,IAAkBZ,EAASH,UAFrD,4DAOgDgB,EAAAA,EAAAA,IAAgCpB,EAAKO,EAASL,MAAOK,EAASJ,UAP9G,cAOsBkB,EAPtB,OAckBC,GAAWC,EAAAA,EAAAA,IAAWtB,EAAY,SAdpD,WAekBuB,EAAAA,EAAAA,IAAOF,EAAU,CACnBG,OAAQJ,EAAkBK,KAAKC,IAC/BC,SAAUrB,EAASH,SAASyB,cAC5BxB,SAASE,EAASF,SAClByB,aAAcvB,EAASL,MAAM2B,cAC7BE,UAAW,CAAC,KACZC,UAAW,GACXC,OAAO,EACPC,YAAaC,KAAKC,QAvBlC,0BAyBkBC,EAAAA,EAAAA,IAAgB,uBAAuBhB,EAAkBK,KAAKC,KAAI,GAzBpF,QA2BY/B,EAAS0C,EAAAA,IACTC,OAAOC,SAASC,SA5B5B,kDA8BYjC,EAAY,CAACN,MAAM,GAAGC,SAAS,GAAGC,SAAS,GAAGC,SAAS,GAAGC,MAAM,KAAEoC,QAAQC,QAAQ,mBAAmB,IAAIA,QAAQ,QAAQ,MA9BrI,gCAiCQnC,GAAY,SAAAK,GAAO,OAAO,kBAAIA,GAAX,IAAeT,SAAS,GAC3BE,MAAM,2DAlC9B,2DAda,sBAuDb,OAJAR,EAAAA,WAAgB,WACZ8C,SAASC,MAAQ,uBAClB,KAEI,iBAAKC,UAAU,YAAf,WACC,gBAAKA,UAAU,gBAAf,UACA,gBAAKC,IAAI,gHAAgHC,IAAI,iCAE7H,iBAAKF,UAAU,gBAAf,WACI,iBAAKA,UAAU,iBAAf,WACI,gBAAKA,UAAU,OAAOC,IAAI,iGAAiGC,IAAI,SAE9HzC,EAASD,QAAS,cAAGwC,UAAU,QAAb,SAAsBvC,EAASD,SAE9C,kBAAM2C,SAjEb,4CAiEsCC,OAAO,OAAtC,WAEI,kBAAOnC,KAAM,WACboC,YAAY,uBACZC,KAAK,OACLC,SAAU1C,EACVK,MAAOT,EAASF,YAEhB,kBAAOU,KAAM,QACboC,YAAY,mBACZC,KAAK,QACLC,SAAU1C,EACVK,MAAOT,EAASL,SAEhB,kBAAOa,KAAM,WACboC,YAAY,2BACZC,KAAK,OACLC,SAAU1C,EACVK,MAAOT,EAASH,YAEhB,kBAAOW,KAAM,WACboC,YAAY,gBACZC,KAAK,WACLC,SAAU1C,EACVK,MAAOT,EAASJ,YAEhB,mBAAQmD,SAAU7C,EAAW2C,KAAK,SAASN,UAAS,YAAeS,MAAO,CAACC,QAAS/C,EAAU,MAAM,QAApG,2BAKR,iBAAKqC,UAAU,SAAf,WACI,6CACA,SAAC,KAAD,CAAMA,UAAU,OAAOW,GAAInB,EAAAA,GAA3B,+B","sources":["pages/Signup.js"],"sourcesContent":["import React from \"react\";\r\nimport {Link,useNavigate} from \"react-router-dom\"\r\nimport FirebaseContext from \"../contexts/firebase\";\r\nimport \"../styles/login.css\"\r\nimport * as PATHS from \"../constants/Routes\"\r\nimport { doesUsernameExist , updateFollowers } from '../services/firebase';\r\nimport { createUserWithEmailAndPassword } from \"firebase/auth\";\r\nimport { collection, addDoc } from \"firebase/firestore\"; \r\nfunction Signup(){\r\n\r\n    const navigate = useNavigate();\r\n    const { auth,FieldValue } = React.useContext(FirebaseContext);\r\n\r\n    const [formData ,setFormData] =React.useState({email:\"\",password:\"\",userName:\"\",fullName:\"\",error:\"\"})\r\n\r\n    const isInvalid = formData.email === \"\" || formData.password === \"\"||formData.password.length<8\r\n    ||formData.userName===\"\"||formData.fullName===\"\";\r\n    function changeHandle(evn){\r\n        setFormData((prv)=>{return{\r\n            ...prv,\r\n            [evn.target.name] :evn.target.value}})\r\n    }\r\n    async function submitHandler(event){\r\n        event.preventDefault();\r\n        const isExist = await doesUsernameExist(formData.userName);\r\n        //console.log(\"idExist\",isExist);\r\n        if(!isExist){\r\n            try{\r\n\r\n                    const createdUserResult = await createUserWithEmailAndPassword (auth,formData.email, formData.password);\r\n                    //console.log(createdUserResult)\r\n        \r\n                // authentication\r\n                // -> emailAddress & password \r\n        \r\n                // firebase user collection (create a document)\r\n                const usersRef = collection(FieldValue, 'users');\r\n                await addDoc(usersRef, {\r\n                    userId: createdUserResult.user.uid,\r\n                    username: formData.userName.toLowerCase(),\r\n                    fullName:formData.fullName,\r\n                    emailAddress: formData.email.toLowerCase(),\r\n                    following: [\"2\"],\r\n                    followers: [],\r\n                    photos:0,\r\n                    dateCreated: Date.now()\r\n                })\r\n                await updateFollowers('Z4UuSMEn71luvi49bcOr',createdUserResult.user.uid,false);\r\n                \r\n                navigate(PATHS.HOME);\r\n                window.location.reload();\r\n            }catch(e){\r\n                setFormData({email:\"\",password:\"\",userName:\"\",fullName:\"\",error:e.message.replace(\"Firebase: Error \",\"\").replace(\"auth/\",\"\")})\r\n            }\r\n        } else {\r\n            setFormData(prv =>{return {...prv,userName:\"\",\r\n                            error:'That username is already taken, please try another.'}})\r\n        }\r\n    }\r\n    React.useEffect(() => {\r\n        document.title = 'Signup - Instagram';\r\n    }, []);\r\n\r\n    return(<div className=\"container\">\r\n            <div className=\"img-container\">\r\n            <img src=\"https://raw.githubusercontent.com/Amr-Zain/React-Instagram-Clone/master/public/images/iphone-with-profile.jpg\" alt=\"iPhone with Instagram app\" />\r\n            </div>\r\n            <div className=\"container-sec\">\r\n                <div className=\"form-container\">\r\n                    <img className=\"logo\" src=\"https://raw.githubusercontent.com/Amr-Zain/React-Instagram-Clone/master/public/images/logo.png\" alt=\"logo\"/>\r\n                    \r\n                    {formData.error && <p className=\"error\">{formData.error}</p>}\r\n                \r\n                        <form onSubmit={submitHandler} method=\"POST\">\r\n                            \r\n                            <input name= \"fullName\" \r\n                            placeholder=\"Enter Your Full Name\"\r\n                            type=\"text\" \r\n                            onChange={changeHandle}\r\n                            value={formData.fullName}\r\n                            />\r\n                            <input name= \"email\" \r\n                            placeholder=\"Enter Your Email\"\r\n                            type=\"email\" \r\n                            onChange={changeHandle}\r\n                            value={formData.email}\r\n                            />\r\n                            <input name= \"userName\" \r\n                            placeholder=\"Enter Your Full Username\"\r\n                            type=\"text\" \r\n                            onChange={changeHandle}\r\n                            value={formData.userName}\r\n                            />\r\n                            <input name= \"password\"\r\n                            placeholder=\"Your Password\"\r\n                            type=\"password\"\r\n                            onChange={changeHandle}\r\n                            value={formData.password}\r\n                            />\r\n                            <button disabled={isInvalid} type=\"submit\" className={`subnitBtn`} style={{opacity: isInvalid?\"50%\":\"100%\"}} >Signup</button>\r\n                        </form>\r\n                \r\n                        \r\n                    </div>\r\n                    <div className=\"signup\">\r\n                        <p>Have an account?</p>\r\n                        <Link className=\"link\" to={PATHS.LOGIN} >Log In</Link>\r\n                    </div>\r\n                </div>\r\n            </div>)\r\n}\r\nexport default Signup;"],"names":["navigate","useNavigate","React","FirebaseContext","auth","FieldValue","email","password","userName","fullName","error","formData","setFormData","isInvalid","length","changeHandle","evn","prv","target","name","value","event","preventDefault","doesUsernameExist","createUserWithEmailAndPassword","createdUserResult","usersRef","collection","addDoc","userId","user","uid","username","toLowerCase","emailAddress","following","followers","photos","dateCreated","Date","now","updateFollowers","PATHS","window","location","reload","message","replace","document","title","className","src","alt","onSubmit","method","placeholder","type","onChange","disabled","style","opacity","to"],"sourceRoot":""}