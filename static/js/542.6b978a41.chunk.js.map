{"version":3,"file":"static/js/542.6b978a41.chunk.js","mappings":"oRA2GA,UAlGA,WAEI,IAAMA,GAAWC,EAAAA,EAAAA,MACjB,EAA4BC,EAAAA,WAAiBC,EAAAA,GAArCC,EAAR,EAAQA,KAAKC,EAAb,EAAaA,WACPC,GAAOC,EAAAA,EAAAA,KACb,EAA+BL,EAAAA,SAAe,CAACM,MAAM,GAAGC,SAAS,GAAGC,SAAS,GAAGC,SAAS,GAAGC,MAAM,KAAlG,eAAOC,EAAP,KAAiBC,EAAjB,KAEMC,EAA+B,KAAnBF,EAASL,OAAsC,KAAtBK,EAASJ,UAAiBI,EAASJ,SAASO,OAAO,GACxE,KAApBH,EAASH,UAAmC,KAApBG,EAASF,SACnC,SAASM,EAAaC,GAClBJ,GAAY,SAACK,GAAO,yBACbA,GADa,cAEfD,EAAIE,OAAOC,KAAOH,EAAIE,OAAOE,WAZzB,8CAcb,WAA6BC,GAA7B,qFACIA,EAAMC,iBADV,UAE0BC,EAAAA,EAAAA,IAAkBZ,EAASH,UAFrD,4DAMgDgB,EAAAA,EAAAA,IAAgCtB,EAAKS,EAASL,MAAOK,EAASJ,UAN9G,cAMsBkB,EANtB,OAOkBC,GAAWC,EAAAA,EAAAA,IAAWxB,EAAY,SAPpD,WAQkByB,EAAAA,EAAAA,IAAOF,EAAU,CACnBG,OAAQJ,EAAkBrB,KAAK0B,IAC/BC,SAAUpB,EAASH,SAASwB,cAC5BvB,SAASE,EAASF,SAClBwB,aAActB,EAASL,MAAM0B,cAC7BE,UAAW,CAAC,KACZC,UAAW,GACXC,OAAO,EACPC,YAAaC,KAAKC,QAhBlC,0BAkBkBC,EAAAA,EAAAA,IAAgB,uBAAuBf,EAAkBrB,KAAK0B,KAAI,GAlBpF,0DAoBYlB,EAAY,CAACN,MAAM,GAAGC,SAAS,GAAGC,SAAS,GAAGC,SAAS,GAAGC,MAAM,KAAE+B,QAAQC,QAAQ,mBAAmB,IAAIA,QAAQ,QAAQ,MApBrI,gCAuBQ9B,GAAY,SAAAK,GAAO,OAAO,kBAAIA,GAAX,IAAeT,SAAS,GAC3BE,MAAM,2DAxB9B,2DAda,sBAkDb,OATCV,EAAAA,WAAgB,WACTI,GACAN,EAAS6C,EAAAA,GAAY,CAAED,SAAS,MAErC,CAACtC,EAAMN,IACVE,EAAAA,WAAgB,WACZ4C,SAASC,MAAQ,uBAClB,KAEI,iBAAKC,UAAU,YAAf,WACC,gBAAKA,UAAU,gBAAf,UACI,gBAAKC,IAAI,gHAAgHC,IAAI,iCAEjI,iBAAKF,UAAU,gBAAf,WACI,iBAAKA,UAAU,iBAAf,WACI,gBAAKA,UAAU,OAAOC,IAAI,iGAAiGC,IAAI,SAE9HrC,EAASD,QAAS,cAAGoC,UAAU,QAAb,SAAsBnC,EAASD,SAE9C,kBAAMuC,SA5Db,4CA4DsCC,OAAO,OAAtC,WAEI,kBAAO/B,KAAM,WACbgC,YAAY,uBACZC,KAAK,OACLC,SAAUtC,EACVK,MAAOT,EAASF,YAEhB,kBAAOU,KAAM,QACbgC,YAAY,mBACZC,KAAK,QACLC,SAAUtC,EACVK,MAAOT,EAASL,SAEhB,kBAAOa,KAAM,WACbgC,YAAY,2BACZC,KAAK,OACLC,SAAUtC,EACVK,MAAOT,EAASH,YAEhB,kBAAOW,KAAM,WACbgC,YAAY,gBACZC,KAAK,WACLC,SAAUtC,EACVK,MAAOT,EAASJ,YAEhB,mBAAQ+C,SAAUzC,EAAWuC,KAAK,SAASN,UAAS,YAAeS,MAAO,CAACC,QAAS3C,EAAU,MAAM,QAApG,2BAKR,iBAAKiC,UAAU,SAAf,WACI,6CACA,SAAC,KAAD,CAAMA,UAAU,OAAOW,GAAId,EAAAA,GAA3B,+B","sources":["pages/Signup.js"],"sourcesContent":["import React from \"react\";\r\nimport {Link,useNavigate} from \"react-router-dom\"\r\nimport FirebaseContext from \"../contexts/firebase\";\r\nimport \"../styles/login.css\"\r\nimport * as PATHS from \"../constants/Routes\"\r\nimport { doesUsernameExist , updateFollowers } from '../services/firebase';\r\nimport { createUserWithEmailAndPassword } from \"firebase/auth\";\r\nimport { collection, addDoc } from \"firebase/firestore\"; \r\nimport useAuthUserListener from \"../hooks/useAthUserListener\";\r\nfunction Signup(){\r\n\r\n    const navigate = useNavigate();\r\n    const { auth,FieldValue } = React.useContext(FirebaseContext);\r\n    const user = useAuthUserListener();\r\n    const [formData ,setFormData] =React.useState({email:\"\",password:\"\",userName:\"\",fullName:\"\",error:\"\"})\r\n\r\n    const isInvalid = formData.email === \"\" || formData.password === \"\"||formData.password.length<8\r\n    ||formData.userName===\"\"||formData.fullName===\"\";\r\n    function changeHandle(evn){\r\n        setFormData((prv)=>{return{\r\n            ...prv,\r\n            [evn.target.name] :evn.target.value}})\r\n    }\r\n    async function submitHandler(event){\r\n        event.preventDefault();\r\n        const isExist = await doesUsernameExist(formData.userName);\r\n        if(!isExist){\r\n            try{\r\n\r\n                    const createdUserResult = await createUserWithEmailAndPassword (auth,formData.email, formData.password);\r\n                const usersRef = collection(FieldValue, 'users');\r\n                await addDoc(usersRef, {\r\n                    userId: createdUserResult.user.uid,\r\n                    username: formData.userName.toLowerCase(),\r\n                    fullName:formData.fullName,\r\n                    emailAddress: formData.email.toLowerCase(),\r\n                    following: [\"2\"],\r\n                    followers: [],\r\n                    photos:0,\r\n                    dateCreated: Date.now()\r\n                })\r\n                await updateFollowers('Z4UuSMEn71luvi49bcOr',createdUserResult.user.uid,false);\r\n            }catch(e){\r\n                setFormData({email:\"\",password:\"\",userName:\"\",fullName:\"\",error:e.message.replace(\"Firebase: Error \",\"\").replace(\"auth/\",\"\")})\r\n            }\r\n        } else {\r\n            setFormData(prv =>{return {...prv,userName:\"\",\r\n                            error:'That username is already taken, please try another.'}})\r\n        }\r\n    }\r\n     React.useEffect(() => {\r\n        if (user) {\r\n            navigate(PATHS.HOME, { replace: true });\r\n        }\r\n    }, [user, navigate]);\r\n    React.useEffect(() => {\r\n        document.title = 'Signup - Instagram';\r\n    }, []);\r\n\r\n    return(<div className=\"container\">\r\n            <div className=\"img-container\">\r\n                <img src=\"https://raw.githubusercontent.com/Amr-Zain/React-Instagram-Clone/master/public/images/iphone-with-profile.jpg\" alt=\"iPhone with Instagram app\" />\r\n            </div>\r\n            <div className=\"container-sec\">\r\n                <div className=\"form-container\">\r\n                    <img className=\"logo\" src=\"https://raw.githubusercontent.com/Amr-Zain/React-Instagram-Clone/master/public/images/logo.png\" alt=\"logo\"/>\r\n                    \r\n                    {formData.error && <p className=\"error\">{formData.error}</p>}\r\n                \r\n                        <form onSubmit={submitHandler} method=\"POST\">\r\n                            \r\n                            <input name= \"fullName\" \r\n                            placeholder=\"Enter Your Full Name\"\r\n                            type=\"text\" \r\n                            onChange={changeHandle}\r\n                            value={formData.fullName}\r\n                            />\r\n                            <input name= \"email\" \r\n                            placeholder=\"Enter Your Email\"\r\n                            type=\"email\" \r\n                            onChange={changeHandle}\r\n                            value={formData.email}\r\n                            />\r\n                            <input name= \"userName\" \r\n                            placeholder=\"Enter Your Full Username\"\r\n                            type=\"text\" \r\n                            onChange={changeHandle}\r\n                            value={formData.userName}\r\n                            />\r\n                            <input name= \"password\"\r\n                            placeholder=\"Your Password\"\r\n                            type=\"password\"\r\n                            onChange={changeHandle}\r\n                            value={formData.password}\r\n                            />\r\n                            <button disabled={isInvalid} type=\"submit\" className={`subnitBtn`} style={{opacity: isInvalid?\"50%\":\"100%\"}} >Signup</button>\r\n                        </form>\r\n                \r\n                        \r\n                    </div>\r\n                    <div className=\"signup\">\r\n                        <p>Have an account?</p>\r\n                        <Link className=\"link\" to={PATHS.LOGIN} >Log In</Link>\r\n                    </div>\r\n                </div>\r\n            </div>)\r\n}\r\nexport default Signup;"],"names":["navigate","useNavigate","React","FirebaseContext","auth","FieldValue","user","useAuthUserListener","email","password","userName","fullName","error","formData","setFormData","isInvalid","length","changeHandle","evn","prv","target","name","value","event","preventDefault","doesUsernameExist","createUserWithEmailAndPassword","createdUserResult","usersRef","collection","addDoc","userId","uid","username","toLowerCase","emailAddress","following","followers","photos","dateCreated","Date","now","updateFollowers","message","replace","PATHS","document","title","className","src","alt","onSubmit","method","placeholder","type","onChange","disabled","style","opacity","to"],"sourceRoot":""}